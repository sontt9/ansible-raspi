[Unit]
Description=AdGuardHome

[Service]
User={{ adguardhome_user }}
Group={{ adguardhome_group }}
ProtectSystem=strict
ProtectHome=true
ReadWritePaths={{ adguardhome_config_path }} {{ adguardhome_data_path }}
ExecStart=adguardhome -w {{ adguardhome_data_path }} -c {{ adguardhome_config_path }}/adguardhome.yaml
AmbientCapabilities=CAP_NET_BIND_SERVICE
NoNewPrivileges=true
PrivateTmp=true
PrivateDevices=true
DevicePolicy=closed
ProtectKernelTunables=true
ProtectKernelModules=true
ProtectControlGroups=true
LockPersonality=true
MemoryDenyWriteExecute=true
RestrictRealtime=true
RemoveIPC=true
RestrictAddressFamilies=AF_UNIX AF_INET AF_INET6 AF_NETLINK

[Install]
WantedBy=multi-user.target
